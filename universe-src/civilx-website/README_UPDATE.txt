ОБНОВЛЕНИЕ САЙТА CIVILX - СИСТЕМА АКТИВАЦИИ ПО ВЕРСИЯМ REVIT
================================================================

ОПИСАНИЕ ОБНОВЛЕНИЯ:
- Реализована новая система активации продуктов по версиям Revit
- Пользователь может активировать продукт один раз для каждой версии Revit
- Убран общий статус активации из основного списка подписок
- Добавлен детальный просмотр активаций по версиям Revit
- Добавлены кнопки активации/деактивации для каждой версии

ФАЙЛЫ ДЛЯ ОБНОВЛЕНИЯ:
====================

1. auth-api.php - Обновленный API с новой логикой активации
2. dashboard/index.html - Обновленный интерфейс ЛК
3. database/create_table.sql - SQL скрипт для создания новой таблицы
4. database/migrate_data.sql - SQL скрипт для миграции существующих данных

ИНСТРУКЦИИ ПО УСТАНОВКЕ:
========================

1. СОЗДАНИЕ ТАБЛИЦЫ В БАЗЕ ДАННЫХ:
   - Выполните SQL скрипт: database/create_table.sql
   - Это создаст таблицу product_activations для отслеживания активаций

2. МИГРАЦИЯ СУЩЕСТВУЮЩИХ ДАННЫХ:
   - Выполните SQL скрипт: database/migrate_data.sql
   - Это деактивирует все существующие активации и создаст записи для Revit 2023

3. ОБНОВЛЕНИЕ ФАЙЛОВ САЙТА:
   - Замените auth-api.php на обновленную версию
   - Замените dashboard/index.html на обновленную версию

4. ПРОВЕРКА РАБОТЫ:
   - Войдите в личный кабинет
   - Раскройте подписку DataHub
   - Проверьте отображение активаций по версиям Revit
   - Протестируйте кнопки активации/деактивации

НОВЫЕ ВОЗМОЖНОСТИ:
==================

1. АКТИВАЦИЯ ПО ВЕРСИЯМ REVIT:
   - Каждый продукт можно активировать отдельно для каждой версии Revit
   - Один продукт = одна активация на версию Revit
   - При попытке повторной активации выводится ошибка

2. ИНТЕРФЕЙС АКТИВАЦИЙ:
   - В раскрывающемся списке продуктов показываются активации
   - Для каждой версии Revit отображается статус и версия продукта
   - Кнопки "Активировать"/"Деактивировать" для каждой версии

3. API ENDPOINTS:
   - /api/activate-product - активация продукта для версии Revit
   - /api/deactivate-product - деактивация продукта для версии Revit
   - /api/product-activations - получение всех активаций пользователя

ТЕХНИЧЕСКИЕ ДЕТАЛИ:
==================

1. НОВАЯ ТАБЛИЦА product_activations:
   - user_id - ID пользователя
   - product_id - ID продукта
   - revit_version - версия Revit (например, "2023")
   - product_version - версия продукта
   - activation_status - статус активации (active/inactive)
   - activated_at - дата активации
   - deactivated_at - дата деактивации

2. МИГРАЦИЯ ДАННЫХ:
   - Все существующие активации деактивируются
   - Создаются записи для Revit 2023 с версией продукта 1.0
   - Статус новых записей: inactive (можно активировать)

3. ПРОВЕРКИ ПРИ АКТИВАЦИИ:
   - Проверка активной подписки
   - Проверка срока действия подписки
   - Проверка уникальности активации для версии Revit
   - Проверка существования версии продукта

ВАЖНЫЕ ЗАМЕЧАНИЯ:
=================

1. Плагин авторизации (settings) остается всегда активным
2. Статус активации убран из основного списка подписок
3. Все активации теперь отслеживаются в деталях по версиям Revit
4. Кэширование активаций на 5 минут для производительности

ПОДДЕРЖКА:
==========

При возникновении проблем:
1. Проверьте выполнение SQL скриптов
2. Проверьте права доступа к файлам
3. Проверьте логи ошибок сервера
4. Убедитесь, что все файлы обновлены

Дата обновления: $(Get-Date -Format "dd.MM.yyyy HH:mm")
Версия: 2.0 - Система активации по версиям Revit
